<!-- main portal -->
<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta http-equiv="Pragma" content="no-cache">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

		<script src="lib/foci.js"></script>
		<script src="lib/vcent.js"></script>
		<script src="lib/require.js"></script>

		<link rel="stylesheet" href="font/fontawesome/import.css">
		<link rel="stylesheet" href="font/ubuntu/import.css">
		<link rel="stylesheet" href="font/alegreya/import.css">

		<link rel="stylesheet" href="css/com.css">

		<link rel="stylesheet" href="/semantic/semantic.min.css">
		<script src="/semantic/semantic.min.js"></script>

		<!-- <link rel="stylesheet" href="com/tbar/import.css">
		<link rel="stylesheet" href="com/waterfall/import.css">
		<link rel="stylesheet" href="com/xfilt/import.css">
		<link rel="stylesheet" href="com/event/import.css"> -->

		<style>
			body {
				font-family: Ubuntu;
				line-height: normal;
			}

			.cont {
				width: 100%;
			}
		</style>
	</head>

	<body class="padding-tbar">
		<div class="cont">
			<div class="header"></div>
		</div>

		<!-- <div class="frame", style="width: 100%; height: 100%; position: fixed; top: 0; left: 0; background: #FFF;"></div> -->

		<script>
			require([ "com/tbar", "com/event", "com/env", "com/upload" ], function (tbar, event, env, upload) {
				env.init(function () {
					var bar = tbar.init();
					bar.search(function (query, cb) {
						doSearch(query, cb);
					});

					// upload.init();

					// event.qview();

					var ev = event.init("body>.cont", {
						onUpdate: function (pos) {
							$("body>.cont>.header")
								.css("padding-left", pos.left + "px")
								.css("padding-right", pos.left + "px");
						}
					});

					function doSearch(query, cb) {
						ev.clear(function () {
							foci.get("/event/search", query, function (suc, dat) {
								if (suc) {
									ev.hide(function () {
										for (var i = 0; i < dat.length; i++) ev.add(dat[i]);
										ev.show();
										cb();
									});
								} else {
									alert(dat);
									cb();
								}
							});
						});
					}
				});
			});

			require([ "com/frame" ], function (frame) {
				// var f = frame.init(".frame");
				// f.open("https://pan.baidu.com");
			});

			// wf1.add("<span>hi</span>");
		</script>
	</body>
</html>
